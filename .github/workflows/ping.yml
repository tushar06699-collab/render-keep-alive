name: Keep Render Backends Awake

on:
  schedule:
    # Every 10 minutes
    # 8:30 AM – 7:30 PM IST
    # IST = UTC + 5:30 → UTC time = 03:00 – 14:00
    - cron: "*/10 3-14 * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - name: Ping Attendance Backend
        run: |
          echo "Pinging Attendance Backend..."
          curl -L \
               --max-time 120 \
               --retry 5 \
               --retry-delay 15 \
               --retry-all-errors \
               https://students-backend-8mup.onrender.com/ || true

      - name: Ping Exam / ERP Backend
        run: |
          echo "Pinging ERP Backend..."
          curl -L \
               --max-time 120 \
               --retry 5 \
               --retry-delay 15 \
               --retry-all-errors \
               https://exam-backend-ko0t.onrender.com/ || true
